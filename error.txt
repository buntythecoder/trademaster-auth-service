23:04:48: Executing 'build'â€¦

Starting Gradle Daemon...
Gradle Daemon started in 4 s 434 ms
> Task :bootBuildInfo
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by lombok.permit.Permit
WARNING: Please consider reporting this to the maintainers of class lombok.permit.Permit
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release

> Task :compileJava
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserPreferencesController.java:323: error: cannot find symbol
            .thenApply(result -> result
            ^
  symbol:   method thenApply((result)->[...]()))))
  location: interface Result<List<UserPreferences>,PreferencesError>
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:69: error: incompatible types: bad return type in lambda expression
                        .getValue().orElse(getDefaultPreferences());
                                          ^
    com.trademaster.userprofile.entity.UserPreferences cannot be converted to com.trademaster.userprofile.domain.UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:71: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<UserPreferences,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:94: error: incompatible types: Predicate<com.trademaster.userprofile.entity.UserPreferences> cannot be converted to Predicate<? super com.trademaster.userprofile.domain.UserPreferences>
                .filter(createThemeFilter(theme))
                                         ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:96: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<List<UserPreferences>,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:108: error: invalid method reference
                .filter(UserPreferences::hasAnyNotifications)
                        ^
  cannot find symbol
    symbol:   method hasAnyNotifications(T)
    location: class UserPreferences
  where T is a type-variable:
    T extends Object declared in interface Stream
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:110: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<List<UserPreferences>,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:122: error: invalid method reference
                .filter(UserPreferences::hasAnyAlerts)
                        ^
  cannot find symbol
    symbol:   method hasAnyAlerts(T)
    location: class UserPreferences
  where T is a type-variable:
    T extends Object declared in interface Stream
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:124: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<List<UserPreferences>,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:136: error: invalid method reference
                .filter(UserPreferences::isHighSecurityMode)
                        ^
  cannot find symbol
    symbol:   method isHighSecurityMode(T)
    location: class UserPreferences
  where T is a type-variable:
    T extends Object declared in interface Stream
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:138: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<List<UserPreferences>,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:198: error: cannot find symbol
                preferences -> preferences.withNotificationSettings(email, sms, push)))
                                          ^
  symbol:   method withNotificationSettings(Boolean,Boolean,Boolean)
  location: variable preferences of type UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:214: error: cannot find symbol
                preferences -> preferences.withSecuritySettings(twoFactorEnabled, sessionTimeout)))
                                          ^
  symbol:   method withSecuritySettings(Boolean,Integer)
  location: variable preferences of type UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:266: error: incompatible types: invalid method reference
                    .filter(this::shouldProcessNotifications)
                            ^
    incompatible types: com.trademaster.userprofile.domain.UserPreferences cannot be converted to com.trademaster.userprofile.entity.UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:260: error: incompatible types: inference variable U has incompatible bounds
        return CompletableFuture.supplyAsync(() -> {
                                            ^
    equality constraints: Result<List<UserPreferences>,PreferencesError>
    lower bounds: Result<Object,F>
  where U,F,E,T are type-variables:
    U extends Object declared in method <U>supplyAsync(Supplier<U>,Executor)
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:331: error: method save in interface CrudRepository<T,ID> cannot be applied to given types;
            return userPreferencesRepository.save(preferences);
                                            ^
  required: S
  found:    com.trademaster.userprofile.entity.UserPreferences
  reason: inference variable S has incompatible bounds
    upper bounds: com.trademaster.userprofile.domain.UserPreferences
    lower bounds: com.trademaster.userprofile.entity.UserPreferences
  where S,T,ID are type-variables:
    S extends com.trademaster.userprofile.domain.UserPreferences declared in method <S>save(S)
    T extends Object declared in interface CrudRepository
    ID extends Object declared in interface CrudRepository
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:332: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<UserPreferences,PreferencesError>
        }).mapError(this::mapToPreferencesError);
                   ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:350: error: method save in interface CrudRepository<T,ID> cannot be applied to given types;
        return Result.tryExecute(() -> userPreferencesRepository.save(preferences))
                                                                ^
  required: S
  found:    com.trademaster.userprofile.entity.UserPreferences
  reason: inference variable S has incompatible bounds
    upper bounds: com.trademaster.userprofile.domain.UserPreferences
    lower bounds: com.trademaster.userprofile.entity.UserPreferences
  where S,T,ID are type-variables:
    S extends com.trademaster.userprofile.domain.UserPreferences declared in method <S>save(S)
    T extends Object declared in interface CrudRepository
    ID extends Object declared in interface CrudRepository
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:351: error: incompatible types: no instance(s) of type variable(s) F exist so that Result<Object,F> conforms to Result<UserPreferences,PreferencesError>
            .mapError(this::mapToPreferencesError);
                     ^
  where F,E,T are type-variables:
    F extends Object declared in method <F>mapError(Function<E,F>)
    E extends Object declared in interface Result
    T extends Object declared in interface Result
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:365: error: cannot find symbol
        return preferences.hasAnyNotifications() && 
                          ^
  symbol:   method hasAnyNotifications()
  location: variable preferences of type UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserPreferencesService.java:366: error: cannot find symbol
               preferences.hasAnyAlerts();
                          ^
  symbol:   method hasAnyAlerts()
  location: variable preferences of type UserPreferences
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:60: error: incompatible types: invalid method reference
            .map(this::mapToProfileResponse)
                 ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:93: error: incompatible types: invalid method reference
            .map(profiles -> profiles.stream().map(this::mapToProfileResponse).toList())
                                                   ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:107: error: incompatible types: com.trademaster.userprofile.domain.RiskLevel cannot be converted to com.trademaster.userprofile.entity.RiskLevel
        return userProfileService.findByRiskLevel(riskLevel)
                                                  ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:123: error: incompatible types: invalid method reference
            .map(profiles -> profiles.stream().map(this::mapToProfileResponse).toList())
                                                   ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:152: error: incompatible types: invalid method reference
            .map(this::mapToProfileResponse)
                 ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:177: error: incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
                applyProfileUpdates(profile, request)
                                    ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:179: error: incompatible types: invalid method reference
            .map(this::mapToProfileResponse)
                 ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:204: error: incompatible types: invalid method reference
            .map(this::mapToProfileResponse)
                 ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:228: error: incompatible types: invalid method reference
            .map(this::mapToProfileResponse)
                 ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:255: error: incompatible types: invalid method reference
                .map(this::mapToProfileResponse)
                     ^
    incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java:279: error: incompatible types: com.trademaster.userprofile.entity.UserProfile cannot be converted to com.trademaster.userprofile.domain.UserProfile
                applyBatchUpdates(profile, request.updates())
                                  ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:94: error: cannot find symbol
                .filter(profile -> profile.getKycInformation() != null)
                                          ^
  symbol:   method getKycInformation()
  location: variable profile of type UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:178: error: cannot find symbol
                profile.withKycInformation(validatedKyc)))
                       ^
  symbol:   method withKycInformation(Map<String,Object>)
  location: variable profile of type UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:285: error: incompatible types: Map<String,Object> cannot be converted to PersonalInformation
                .personalInfo(input.personalInfo())
                                                ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:318: error: cannot find symbol
        return profile -> profile.getRiskLevel().equals(riskLevel);
                                 ^
  symbol:   method getRiskLevel()
  location: variable profile of type UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:327: error: incompatible types: PersonalInformation cannot be converted to Map<String,Object>
            Map<String, Object> personalInfo = profile.getPersonalInfo();
                                                                      ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:341: error: cannot infer type arguments for HashMap<>
        Map<String, Object> updatedInfo = new HashMap<>(profile.getPersonalInfo());
                                          ^
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:344: error: cannot find symbol
        return profile.withPersonalInfo(updatedInfo);
                      ^
  symbol:   method withPersonalInfo(Map<String,Object>)
  location: variable profile of type UserProfile
E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\service\UserProfileService.java:351: error: cannot find symbol
        return profile.isKycCompleted() 
                      ^
  symbol:   method isKycCompleted()
  location: variable profile of type UserProfile
Note: E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserProfileController.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
Note: Some messages have been simplified; recompile with -Xdiags:verbose to get full output
40 errors

> Task :compileJava FAILED

[Incubating] Problems report is available at: file:///E:/workspace/claude/trademaster/user-profile-service/build/reports/problems/problems-report.html
2 actionable tasks: 2 executed

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileJava'.
> Compilation failed; see the compiler output below.
  E:\workspace\claude\trademaster\user-profile-service\src\main\java\com\trademaster\userprofile\controller\UserPreferencesController.java:323: error: cannot find symbol
              .thenApply(result -> result
              ^
    symbol:   method thenApply((result)->[...]()))))
    location: interface Result<List<UserPreferences>,PreferencesError>
  40 errors

* Try:
> Check your code and dependencies to fix the compilation error(s)
> Run with --scan to get full insights.

BUILD FAILED in 44s
23:05:33: Execution finished 'build'.
